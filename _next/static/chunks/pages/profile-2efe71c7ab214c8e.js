(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[277],{9813:function(e,s,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/profile",function(){return t(4379)}])},2:function(e,s,t){"use strict";t.d(s,{Z:function(){return components_Layout}});var l=t(5893),a=t(3299),i=t(1664),n=t.n(i),r=t(1163),c=t(6571),components_Navigation=()=>{let{data:e}=(0,a.useSession)(),s=(0,r.useRouter)();return(0,l.jsx)("nav",{className:"bg-black text-white p-4 shadow-lg",children:(0,l.jsxs)("div",{className:"container mx-auto flex justify-between items-center",children:[(0,l.jsxs)("div",{className:"flex space-x-4",children:[(0,l.jsx)(n(),{href:"/",passHref:!0,children:(0,l.jsx)(c.E.span,{whileHover:{scale:1.05},className:"cursor-pointer ".concat("/"===s.pathname?"text-blue-400":"hover:text-blue-300"),children:"Главная"})}),e&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n(),{href:"/tests",passHref:!0,children:(0,l.jsx)(c.E.span,{whileHover:{scale:1.05},className:"cursor-pointer ".concat("/tests"===s.pathname?"text-blue-400":"hover:text-blue-300"),children:"Тесты"})}),(0,l.jsx)(n(),{href:"/profile",passHref:!0,children:(0,l.jsx)(c.E.span,{whileHover:{scale:1.05},className:"cursor-pointer ".concat("/profile"===s.pathname?"text-blue-400":"hover:text-blue-300"),children:"Профиль"})})]})]}),(0,l.jsx)("div",{children:e?(0,l.jsx)(c.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>(0,a.signOut)({callbackUrl:"/"}),className:"bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg transition-colors",children:"Выйти"}):(0,l.jsx)(n(),{href:"/auth/signin",passHref:!0,children:(0,l.jsx)(c.E.span,{whileHover:{scale:1.05},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg cursor-pointer transition-colors",children:"Войти"})})})]})})},components_Layout=e=>{let{children:s}=e;return(0,l.jsxs)("div",{className:"min-h-screen bg-gray-100",children:[(0,l.jsx)(components_Navigation,{}),(0,l.jsx)("main",{className:"container mx-auto px-4 py-8",children:s})]})}},4379:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return ProfilePage}});var l=t(5893),a=t(7294),i=t(3299),n=t(1163),r=t(2),c=t(6571);function ProfilePage(){var e,s,t,o,d,x;let{data:u,status:h}=(0,i.useSession)(),m=(0,n.useRouter)(),[p,f]=(0,a.useState)(null),[b,g]=(0,a.useState)(!0),[v,j]=(0,a.useState)("dashboard");return((0,a.useEffect)(()=>{"unauthenticated"===h&&m.push("/auth/signin")},[h,m]),(0,a.useEffect)(()=>{let fetchProfile=async()=>{try{let e=await fetch("/api/profile");if(e.ok){let s=await e.json();f(s)}else console.error("Failed to fetch profile")}catch(e){console.error("Error:",e)}finally{g(!1)}};u&&fetchProfile()},[u]),"loading"===h||b)?(0,l.jsx)(r.Z,{children:(0,l.jsx)("div",{className:"flex justify-center items-center min-h-[60vh]",children:(0,l.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-500"})})}):u?(0,l.jsx)(r.Z,{children:(0,l.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,l.jsxs)(c.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white rounded-lg shadow-lg p-8",children:[(0,l.jsxs)("div",{className:"flex items-center mb-8",children:[(0,l.jsx)("div",{className:"w-20 h-20 bg-blue-500 rounded-full flex items-center justify-center text-white text-2xl font-bold",children:(null===(s=u.user)||void 0===s?void 0:null===(e=s.name)||void 0===e?void 0:e[0])||(null===(o=u.user)||void 0===o?void 0:null===(t=o.email)||void 0===t?void 0:t[0])||"?"}),(0,l.jsxs)("div",{className:"ml-6",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold",children:(null===(d=u.user)||void 0===d?void 0:d.name)||"Пользователь"}),(0,l.jsx)("p",{className:"text-gray-600",children:null===(x=u.user)||void 0===x?void 0:x.email})]})]}),p&&(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,l.jsxs)(c.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.1},className:"bg-blue-50 rounded-lg p-6 text-center",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Уровень"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-blue-600",children:p.level})]}),(0,l.jsxs)(c.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.2},className:"bg-green-50 rounded-lg p-6 text-center",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Очки"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-green-600",children:p.totalPoints})]}),(0,l.jsxs)(c.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.3},className:"bg-yellow-50 rounded-lg p-6 text-center",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Завершено тестов"}),(0,l.jsx)("p",{className:"text-3xl font-bold text-yellow-600",children:p.completedTasks})]}),(0,l.jsxs)(c.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{delay:.4},className:"bg-purple-50 rounded-lg p-6 text-center",children:[(0,l.jsx)("h3",{className:"text-lg font-semibold text-gray-600 mb-2",children:"Успешность"}),(0,l.jsxs)("p",{className:"text-3xl font-bold text-purple-600",children:[p.successRate,"%"]})]})]})]})})}):null}}},function(e){e.O(0,[700,664,774,888,179],function(){return e(e.s=9813)}),_N_E=e.O()}]);